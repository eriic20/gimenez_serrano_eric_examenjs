<!doctype html>
<html lang="es">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width,initial-scale=1" />
    <title>DAW1 · Prueba JS · Generador de CV (Básico)</title>

    <style>
      /* =========================================================
      CSS BASE (PLANTILLA)
      - Colores, tipografía, layout 2 columnas
      - Clases útiles: .hidden, .error, .accent-*
    ========================================================== */
      :root {
        --bg: #0b1220;
        --text: #e8eefc;
        --muted: #b7c3e3;
        --line: rgba(255, 255, 255, 0.1);
        --radius: 16px;
        --shadow: 0 16px 40px rgba(0, 0, 0, 0.35);
        --accent: #3b82f6;
      }

      * {
        box-sizing: border-box;
      }
      body {
        margin: 0;
        font-family:
          system-ui,
          -apple-system,
          Segoe UI,
          Roboto,
          Arial,
          sans-serif;
        background: linear-gradient(180deg, var(--bg), #070b14);
        color: var(--text);
      }

      /* =========================================================
      HEADER
      - Barra superior con título + botón Modo vista/edición
    ========================================================== */
      header {
        padding: 20px 16px 0;
        max-width: 1200px;
        margin: 0 auto;
      }
      .topbar {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 16px;
        padding: 14px 16px;
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
      }
      h1 {
        margin: 0;
        font-size: 16px;
        font-weight: 700;
      }
      .subtitle {
        margin: 4px 0 0;
        font-size: 12px;
        color: var(--muted);
        line-height: 1.35;
      }
      .top-actions {
        display: flex;
        gap: 10px;
        align-items: center;
        flex-wrap: wrap;
        justify-content: flex-end;
      }

      /* =========================================================
      LAYOUT PRINCIPAL (2 columnas)
      - Izquierda: formulario
      - Derecha: preview del CV
    ========================================================== */
      .wrap {
        max-width: 1200px;
        margin: 16px auto 40px;
        padding: 0 16px;
        display: grid;
        grid-template-columns: 1.05fr 0.95fr;
        gap: 16px;
      }
      @media (max-width: 980px) {
        .wrap {
          grid-template-columns: 1fr;
        }
      }

      /* =========================================================
      TARJETAS (contenedores)
    ========================================================== */
      .card {
        background: rgba(255, 255, 255, 0.04);
        border: 1px solid var(--line);
        border-radius: var(--radius);
        box-shadow: var(--shadow);
        overflow: hidden;
      }
      .card-h {
        padding: 14px 16px;
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: 10px;
        border-bottom: 1px solid var(--line);
      }
      .card-b {
        padding: 16px;
      }

      /* =========================================================
      FORMULARIO (inputs)
    ========================================================== */
      .grid2 {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 12px;
      }
      @media (max-width: 560px) {
        .grid2 {
          grid-template-columns: 1fr;
        }
      }

      label {
        display: block;
        font-size: 12px;
        color: var(--muted);
        margin-bottom: 6px;
      }
      input,
      textarea,
      select {
        width: 100%;
        padding: 10px 11px;
        border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(0, 0, 0, 0.18);
        color: var(--text);
        outline: none;
      }
      textarea {
        min-height: 90px;
        resize: vertical;
      }

      .section {
        padding: 12px;
        border: 1px solid var(--line);
        border-radius: 14px;
        background: rgba(0, 0, 0, 0.1);
        margin-top: 12px;
      }
      .section-title {
        margin: 0 0 10px;
        font-size: 12px;
        letter-spacing: 0.3px;
        text-transform: uppercase;
        color: rgba(231, 238, 252, 0.9);
      }

      /* Fila 3 columnas para tablas "manuales" (empresa/puesto/años, etc.) */
      .row3 {
        display: grid;
        grid-template-columns: 1.1fr 1.1fr 0.6fr;
        gap: 10px;
        margin-top: 10px;
      }
      @media (max-width: 560px) {
        .row3 {
          grid-template-columns: 1fr;
        }
      }

      /* Skills como checkboxes */
      .skills {
        display: flex;
        flex-wrap: wrap;
        gap: 10px 12px;
      }
      .skills .slabel {
        display: flex;
        align-items: center;
        gap: 8px;
        font-size: 12px;
        color: rgba(231, 238, 252, 0.85);
      }
      .skills input {
        width: auto;
      }

      /* =========================================================
      BOTONES
    ========================================================== */
      button {
        cursor: pointer;
        border: 1px solid rgba(255, 255, 255, 0.14);
        background: rgba(255, 255, 255, 0.06);
        color: var(--text);
        padding: 10px 12px;
        border-radius: 12px;
        font-weight: 650;
        font-size: 13px;
      }
      button:hover {
        background: rgba(255, 255, 255, 0.1);
      }
      .primary {
        border-color: rgba(59, 130, 246, 0.55);
        background: rgba(59, 130, 246, 0.18);
      }
      .danger {
        border-color: rgba(239, 68, 68, 0.55);
        background: rgba(239, 68, 68, 0.14);
      }

      /* =========================================================
      CLASES "FUNCIONALES" (para JS)
      - .hidden: ocultar el cuerpo del formulario en modo vista
      - .error: marcar campos requeridos
    ========================================================== */
      .hidden {
        display: none !important;
      }
      .error {
        border-color: rgba(239, 68, 68, 0.8) !important;
        background: rgba(239, 68, 68, 0.1) !important;
      }

      /* =========================================================
      PREVIEW DEL CV
      - Contenedor #cvPreview
      - Bloque .cv con cabecera, secciones, tablas
    ========================================================== */
      #cvPreview {
        min-height: 520px;
      }

      .placeholder {
        padding: 18px;
        border-radius: 16px;
        border: 1px dashed rgba(255, 255, 255, 0.14);
        color: var(--muted);
        font-size: 13px;
        line-height: 1.45;
        background: rgba(0, 0, 0, 0.14);
      }

      .cv {
        border-radius: 18px;
        overflow: hidden;
        border: 1px solid var(--line);
        background: rgba(0, 0, 0, 0.18);
      }
      .cv-head {
        padding: 16px;
        border-bottom: 1px solid var(--line);
        display: flex;
        gap: 14px;
        align-items: center;
        background: rgba(255, 255, 255, 0.04);
      }
      .avatar {
        width: 74px;
        height: 74px;
        border-radius: 16px;
        object-fit: cover;
        border: 2px solid rgba(255, 255, 255, 0.1);
        background: rgba(255, 255, 255, 0.06);
        flex: 0 0 auto;
      }
      .cv h2 {
        margin: 0;
        font-size: 18px;
        line-height: 1.1;
      }
      .meta {
        margin-top: 6px;
        font-size: 12px;
        color: rgba(231, 238, 252, 0.78);
        display: flex;
        flex-wrap: wrap;
        gap: 8px 14px;
      }

      .cv-body {
        padding: 14px 16px 18px;
        display: grid;
        gap: 14px;
      }
      .cv-sec h3 {
        margin: 0 0 8px;
        font-size: 12px;
        letter-spacing: 0.35px;
        text-transform: uppercase;
        color: rgba(231, 238, 252, 0.92);
      }
      .cv p {
        margin: 0;
        color: rgba(231, 238, 252, 0.82);
        line-height: 1.4;
        font-size: 13px;
      }
      .cv ul {
        margin: 0;
        padding-left: 18px;
        color: rgba(231, 238, 252, 0.82);
        font-size: 13px;
        line-height: 1.5;
      }
      .cv table {
        width: 100%;
        border-collapse: collapse;
        font-size: 13px;
        color: rgba(231, 238, 252, 0.82);
        border-radius: 12px;
        overflow: hidden;
        border: 1px solid var(--line);
      }
      .cv th,
      .cv td {
        padding: 10px 10px;
        border-bottom: 1px solid var(--line);
        text-align: left;
        vertical-align: top;
      }
      .cv th {
        color: rgba(231, 238, 252, 0.92);
        background: rgba(255, 255, 255, 0.04);
        font-weight: 700;
      }
      .cv tr:last-child td {
        border-bottom: none;
      }

      /* =========================================================
      ACENTO POR CLASE (JS debe añadir/quitar estas clases)
    ========================================================== */
      .accent-blue {
        --accent: #3b82f6;
      }
      .accent-green {
        --accent: #22c55e;
      }
      .accent-red {
        --accent: #ef4444;
      }
      .accent-purple {
        --accent: #a855f7;
      }

      /* Pequeña barra de acento (opcional) */
      .accent-bar {
        height: 3px;
        background: var(--accent);
      }

      /* Badge simple */
      .badge {
        font-size: 11px;
        padding: 2px 8px;
        border-radius: 999px;
        border: 1px solid var(--line);
        color: var(--muted);
        background: rgba(255, 255, 255, 0.04);
        white-space: nowrap;
      }
    </style>
  </head>

  <body>
    <!-- =========================================================
    HEADER (SIEMPRE VISIBLE)
    - Botón de modo fuera del formulario para poder volver desde modo vista
  ========================================================== -->
    <header>
      <div class="topbar">
        <div>
          <h1>DAW1 · Prueba JS — Generador de CV (nivel básico)</h1>
          <p class="subtitle">
            Requisitos: querySelector · value · innerHTML · addEventListener ·
            classList · bucles for · arrays 2D
          </p>
        </div>

        <div class="top-actions">
          <span class="badge" id="modeBadge">Modo edición</span>
          <button type="button" id="btnToggle">Modo vista</button>
        </div>
      </div>
    </header>

    <!-- =========================================================
    MAIN (2 columnas)
  ========================================================== -->
    <main class="wrap">
      <!-- =========================================================
      COLUMNA IZQUIERDA: FORMULARIO
    ========================================================== -->
      <section class="card" id="formCard">
        <div class="card-h">
          <strong>Formulario</strong>
          <span class="badge">Campos * obligatorios</span>
        </div>

        <!-- IMPORTANTE: esto es lo que se oculta en modo vista -->
        <div class="card-b" id="formBody">
          <form id="formCV" novalidate>
            <!-- ===== Datos personales ===== -->
            <div class="grid2">
              <div>
                <label for="nombre">Nombre *</label>
                <input id="nombre" type="text" placeholder="Ej: Laura" />
              </div>
              <div>
                <label for="apellidos">Apellidos *</label>
                <input
                  id="apellidos"
                  type="text"
                  placeholder="Ej: García Pérez"
                />
              </div>

              <div>
                <label for="email">Email *</label>
                <input
                  id="email"
                  type="email"
                  placeholder="ejemplo@correo.com"
                />
              </div>
              <div>
                <label for="telefono">Teléfono</label>
                <input id="telefono" type="text" placeholder="600 000 000" />
              </div>

              <div>
                <label for="fotoUrl">Foto (URL)</label>
                <input id="fotoUrl" type="text" placeholder="https://..." />
              </div>
              <div>
                <label for="accentColor">Color de acento</label>
                <select id="accentColor">
                  <option value="blue">Azul</option>
                  <option value="green">Verde</option>
                  <option value="red">Rojo</option>
                  <option value="purple">Morado</option>
                </select>
              </div>
            </div>

            <!-- ===== Sobre mí ===== -->
            <div class="section">
              <h3 class="section-title">Sobre mí</h3>
              <textarea
                id="sobreMi"
                placeholder="Describe tu perfil profesional en 3-5 líneas..."
              ></textarea>
            </div>

            <!-- =========================================================
            SKILLS (sin querySelectorAll)
            - Cada checkbox tiene su id (#skHtml, #skCss, etc.)
            - JS leerá cada uno con querySelector y .checked
          ========================================================== -->
            <div class="section">
              <h3 class="section-title">Skills</h3>
              <div class="skills">
                <label class="slabel"
                  ><input id="skHtml" type="checkbox" value="HTML" />
                  HTML</label
                >
                <label class="slabel"
                  ><input id="skCss" type="checkbox" value="CSS" /> CSS</label
                >
                <label class="slabel"
                  ><input id="skJs" type="checkbox" value="JavaScript" />
                  JavaScript</label
                >
                <label class="slabel"
                  ><input id="skGit" type="checkbox" value="Git" /> Git</label
                >
                <label class="slabel"
                  ><input id="skSql" type="checkbox" value="SQL" /> SQL</label
                >
                <label class="slabel"
                  ><input id="skLinux" type="checkbox" value="Linux" />
                  Linux</label
                >
              </div>
            </div>

            <!-- =========================================================
            EXPERIENCIA (3 filas fijas)
            - JS construirá array 2D: [[empresa, puesto, años], ...]
          ========================================================== -->
            <div class="section">
              <h3 class="section-title">Experiencia (3 filas)</h3>

              <div class="row3">
                <div>
                  <label for="expEmpresa1">Empresa 1</label
                  ><input id="expEmpresa1" type="text" />
                </div>
                <div>
                  <label for="expPuesto1">Puesto 1</label
                  ><input id="expPuesto1" type="text" />
                </div>
                <div>
                  <label for="expAnos1">Años 1</label
                  ><input id="expAnos1" type="number" min="0" />
                </div>
              </div>

              <div class="row3">
                <div>
                  <label for="expEmpresa2">Empresa 2</label
                  ><input id="expEmpresa2" type="text" />
                </div>
                <div>
                  <label for="expPuesto2">Puesto 2</label
                  ><input id="expPuesto2" type="text" />
                </div>
                <div>
                  <label for="expAnos2">Años 2</label
                  ><input id="expAnos2" type="number" min="0" />
                </div>
              </div>

              <div class="row3">
                <div>
                  <label for="expEmpresa3">Empresa 3</label
                  ><input id="expEmpresa3" type="text" />
                </div>
                <div>
                  <label for="expPuesto3">Puesto 3</label
                  ><input id="expPuesto3" type="text" />
                </div>
                <div>
                  <label for="expAnos3">Años 3</label
                  ><input id="expAnos3" type="number" min="0" />
                </div>
              </div>
            </div>

            <!-- =========================================================
            FORMACIÓN (2 filas fijas)
            - JS construirá array 2D: [[centro, titulo, año], ...]
          ========================================================== -->
            <div class="section">
              <h3 class="section-title">Formación (2 filas)</h3>

              <div class="row3">
                <div>
                  <label for="eduCentro1">Centro 1</label
                  ><input id="eduCentro1" type="text" />
                </div>
                <div>
                  <label for="eduTitulo1">Título 1</label
                  ><input id="eduTitulo1" type="text" />
                </div>
                <div>
                  <label for="eduAno1">Año 1</label
                  ><input id="eduAno1" type="number" min="1900" />
                </div>
              </div>

              <div class="row3">
                <div>
                  <label for="eduCentro2">Centro 2</label
                  ><input id="eduCentro2" type="text" />
                </div>
                <div>
                  <label for="eduTitulo2">Título 2</label
                  ><input id="eduTitulo2" type="text" />
                </div>
                <div>
                  <label for="eduAno2">Año 2</label
                  ><input id="eduAno2" type="number" min="1900" />
                </div>
              </div>
            </div>

            <!-- ===== Botones principales ===== -->
            <div
              style="
                display: flex;
                gap: 10px;
                flex-wrap: wrap;
                margin-top: 14px;
              "
            >
              <button type="button" class="primary" id="btnGenerar">
                Generar CV
              </button>
              <button type="button" class="danger" id="btnLimpiar">
                Limpiar
              </button>
            </div>
          </form>
        </div>
      </section>

      <!-- =========================================================
      COLUMNA DERECHA: PREVIEW
    ========================================================== -->
      <section class="card">
        <div class="card-h">
          <strong>Vista previa del CV</strong>
          <span class="badge">#cvPreview</span>
        </div>
        <div class="card-b" id="cvPreview">
          <div class="placeholder">
            Aquí aparecerá tu currículum al pulsar <b>Generar CV</b>.<br />
            (El CV se genera con <b>innerHTML</b>.)
          </div>
        </div>
      </section>
    </main>

    <!-- Code injected by live-server -->
    <script>
      // <![CDATA[  <-- For SVG support
      if ("WebSocket" in window) {
        (function () {
          function refreshCSS() {
            var sheets = [].slice.call(document.getElementsByTagName("link"));
            var head = document.getElementsByTagName("head")[0];
            for (var i = 0; i < sheets.length; ++i) {
              var elem = sheets[i];
              var parent = elem.parentElement || head;
              parent.removeChild(elem);
              var rel = elem.rel;
              if (
                (elem.href && typeof rel != "string") ||
                rel.length == 0 ||
                rel.toLowerCase() == "stylesheet"
              ) {
                var url = elem.href.replace(/(&|\?)_cacheOverride=\d+/, "");
                elem.href =
                  url +
                  (url.indexOf("?") >= 0 ? "&" : "?") +
                  "_cacheOverride=" +
                  new Date().valueOf();
              }
              parent.appendChild(elem);
            }
          }
          var protocol =
            window.location.protocol === "http:" ? "ws://" : "wss://";
          var address =
            protocol + window.location.host + window.location.pathname + "/ws";
          var socket = new WebSocket(address);
          socket.onmessage = function (msg) {
            if (msg.data == "reload") window.location.reload();
            else if (msg.data == "refreshcss") refreshCSS();
          };
          if (
            sessionStorage &&
            !sessionStorage.getItem("IsThisFirstTime_Log_From_LiveServer")
          ) {
            console.log("Live reload enabled.");
            sessionStorage.setItem("IsThisFirstTime_Log_From_LiveServer", true);
          }
        })();
      } else {
        console.error(
          "Upgrade your browser. This Browser is NOT supported WebSocket for Live-Reloading.",
        );
      }
      // ]]>
    </script>
    <script src="index.js"></script>
  </body>
</html>
